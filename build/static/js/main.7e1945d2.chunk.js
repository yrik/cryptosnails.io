(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1040:function(e,t,n){},1043:function(e,t,n){},1044:function(e,t,n){var a={"./ion-phaser.entry.js":[1046,5]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=1044,e.exports=r},1045:function(e,t,n){"use strict";n.r(t);var a=n(150),r=n(9),s=n.n(r),i=n(213),c=n.n(i),o=n(176),u=(n(1040),n(3)),l=n.n(u),p=n(54),d=n(56),y=n(179),b=n(463),m=(n(1043),[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"snailsAmount",type:"uint256"}],name:"buy",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"reserveSnails",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"toogleSale",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_SNAILS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"snailPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"statusSale",outputs:[{internalType:"bool",name:"status",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"tokensOfOwner",outputs:[{internalType:"string[]",name:"ownerTokens",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]),f=n(108),x=n(217),h=n.n(x),j=n(467),g=n(8);function v(e){var t,n,a=e.Moralis,s=Object(r.useRef)(null),i=a.Object.extend("PlayerPosition"),c=Object(r.useState)(),o=Object(d.a)(c,2),u=(o[0],o[1],Object(r.useState)(void 0)),y=Object(d.a)(u,2),b=y[0],m=y[1],x={type:h.a.AUTO,scale:{mode:h.a.Scale.FIT,autoCenter:h.a.Scale.CENTER_BOTH,width:800,height:600},physics:{default:"arcade",arcade:{debug:!1}},scene:{preload:function(){return k.apply(this,arguments)},create:function(){return N.apply(this,arguments)},update:function(e,t){return M.apply(this,arguments)}}};Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.User.current(),m(n),!n){e.next=6;break}return e.next=5,F();case 5:t=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}));var v,O,w=0,T={};function k(){return(k=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t||"/images/basic-snail.svg",this.load.image("player",n),this.load.image("coin","/images/coin.png"),this.load.image("tiles","/images/sprite.png");case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function N(){return(N=Object(p.a)(l.a.mark((function e(){var t,r,s,i,c,o,u,p,d,y,m,x,h,j,g,k,N,M,S,A,F,P,E=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new a.Query("Level"),e.next=3,t.descending("createdAt").first();case 3:return r=e.sent,s=r.get("size"),i=Object(f.a)(Array(s).keys()),c=this.make.tilemap({data:i.map((function(e){return i.map((function(e){return 4}))})),tileWidth:32,tileHeight:32,tileMargin:0,tileSpacing:0}),o=c.addTilesetImage("tiles"),c.createLayer(0,o,0,0),u=this.make.tilemap({data:r.get("data"),tileWidth:32,tileHeight:32,tileMargin:0,tileSpacing:0}),p=u.addTilesetImage("tiles"),(d=u.createLayer(0,p,0,0)).setCollisionBetween(1,50),y=this.make.tilemap({data:i.map((function(e){return i.map((function(t){if(0==e||e==s-1||0==t||t==s-1)return 3}))})),tileWidth:32,tileHeight:32,tileMargin:0,tileSpacing:0}),m=y.addTilesetImage("tiles"),(x=y.createLayer(0,m,0,0)).setCollisionBetween(1,50),h=this.cameras.main,v=this.input.keyboard.createCursorKeys(),h.setBounds(0,0,c.widthInPixels,c.heightInPixels),j=this.physics.add.staticGroup(),g=new a.Query("Coin"),e.next=24,g.limit(1e3).find();case 24:return e.sent.map((function(e){console.log("coins",j),j.create(32*e.get("x"),32*e.get("y"),"coin")})),e.next=28,g.subscribe();case 28:if(e.sent.on("create",(function(e){console.log("created",e),j.create(32*e.get("x"),32*e.get("y"),"coin"),j.refresh()})),!b){e.next=59;break}return w=b.get("coinScore")||0,(k=new a.Query("PlayerPosition")).equalTo("player",b.get("ethAddress")),e.next=36,k.descending("createdAt").first();case 36:return N=e.sent,M=300,S=300,N&&N.get("x")&&N.get("y")&&(M=N.get("x"),S=N.get("y")),n=this.physics.add.image(M,S,"player").setScale(.25).refreshBody(),this.physics.add.overlap(n,j,C,null,this),this.physics.add.collider(n,d),this.physics.add.collider(n,x),h.startFollow(n),A=new a.Query("PlayerPosition"),e.next=48,A.subscribe();case 48:return e.sent.on("create",(function(e){var t=e.get("x"),n=e.get("y"),a=e.get("player");a!=(b?b.get("ethAddress"):void 0)&&(void 0==T[a]?T[a]=E.add.image(t,n,"player").setScale(.2):(T[a].x=t,T[a].y=n))})),F=new a.Query("Level"),e.next=53,F.subscribe();case 53:e.sent.on("create",(function(e){console.log("New Level created");var t=e.get("size");Object(f.a)(Array(t).keys())})),O=this.add.text(16,16,"Coins Collected: ".concat(w),{font:"12px monospace",fill:"#ffffff",padding:{x:10,y:5},backgroundColor:"#000000"}).setScrollFactor(0),(P=this.add.text(180,16,"Claim",{font:"12px monospace",fill:"#ffffff",padding:{x:10,y:5},backgroundColor:"#000000"}).setScrollFactor(0)).setInteractive(),P.on("pointerdown",I);case 59:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function M(){return(M=Object(p.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&(v.left.isDown?(n.setVelocityX(-160),n.setFlip(!1,!1)):v.right.isDown?(n.setVelocityX(160),n.setFlip(!0,!1)):v.down.isDown?n.setVelocityY(160):v.up.isDown&&n.setVelocityY(-160)),!n){e.next=12;break}if(n.lastX==n.x&&n.lastY==n.y){e.next=12;break}if(!b){e.next=12;break}return(r=new i).set("player",b.get("ethAddress")),r.set("x",n.x),r.set("y",n.y),n.lastX=n.x,n.lastY=n.y,e.next=12,r.save();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Moving coins to your account.."),e.next=3,a.Cloud.run("claimCoins");case 3:return w=0,b.set("coinScore",0),e.next=7,b.save();case 7:O.setText("Coins collected: ".concat(w));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.destroy(n.x,n.y),w++,b.set("coinScore",w),e.next=5,b.save();case 5:return e.next=7,a.Cloud.run("collectCoin",{x:n.x/32,y:n.y/32});case 7:return O.setText("Coins collected: ".concat(w)),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(l.a.mark((function e(){var t,n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 4:if(t=e.sent){e.next=9;break}return e.next=8,undefined.first();case 8:t=e.sent;case 9:if(t){e.next=11;break}return e.abrupt("return",void 0);case 11:if(t.get("token_uri")){e.next=13;break}return e.abrupt("return",void 0);case 13:return e.next=15,a.Cloud.run("getTokenData",{tokenUri:t.get("token_uri")});case 15:return n=e.sent,r=n.data.image_data,s=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(s),console.log("url",i),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log("IonPhaser"),console.log("IonPhaser INIT"),Object(g.jsx)(j.a,{ref:s,game:x})}function O(e){var t=e.Moralis,n=Object(r.useState)([]),a=Object(d.a)(n,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new t.Query("User"),e.next=3,n.descending().limit(10).find();case 3:a=e.sent,i(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(g.jsxs)("div",{className:"text-center mt-5",children:[Object(g.jsx)("h3",{children:"Leaderboard"}),Object(g.jsx)("div",{children:s.map((function(e){return Object(g.jsxs)("div",{children:["Player ",e.get("ethAddress")," has collected ",e.get("coinScore")," $Snail Tokens"]})}))})]})}var w=s.a.memo(v);function T(){return Object(g.jsxs)("div",{className:"text-center mt-10",children:[Object(g.jsx)("h3",{className:"text-xl pb-5",children:"Roadmap"}),Object(g.jsx)("div",{children:Object(g.jsxs)("table",{className:"border-collapse border table-auto text-left",children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"Game prototype"}),Object(g.jsx)("td",{className:"border p-5",children:"September 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"\u2705"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"NFT collection draft"}),Object(g.jsx)("td",{className:"border p-5",children:"September 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"\u2705"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"NFT collection release"}),Object(g.jsx)("td",{className:"border p-5",children:"October 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"pending"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"Game release"}),Object(g.jsx)("td",{className:"border p-5",children:"October 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"pending"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"NFT staking"}),Object(g.jsx)("td",{className:"border p-5",children:"November 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"pending"})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"border p-5",children:"Liqudity Pool staking"}),Object(g.jsx)("td",{className:"border p-5",children:"November 2021"}),Object(g.jsx)("td",{className:"border p-5 text-right",children:"pending"})]})]})})]})}var k=function(e){var t=e.isProduction,n={address:"0x7A02175D2370033AA73df96BBb45813bF9DDE771",abi:m,chain:t?"polygon":"mumbai"},s=Object(o.b)(),i=s.Moralis,c=(s.web3,s.isInitialized),u=s.authenticate,f=s.logout,x=s.isAuthenticated,h=(s.user,s.isWeb3Enabled,s.enableWeb3),j=(s.web3EnableError,s.isWeb3EnableLoading,Object(r.useState)(void 0)),v=Object(d.a)(j,2),k=v[0],N=v[1],M=Object(r.useState)(void 0),I=Object(d.a)(M,2),S=I[0],C=I[1],A=Object(r.useState)(1),F=Object(d.a)(A,2),P=F[0],E=F[1],L=P*k;function B(){return(B=Object(p.a)(l.a.mark((function e(){var t,a,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.a.providers.Web3Provider(window.ethereum),a=t.getSigner(),r=new y.a.Contract(n.address,n.abi,a),e.next=5,r.buy(P,{value:L});case 5:return s=e.sent,e.next=8,s.wait();case 8:i=e.sent,console.log(i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=9;break}return e.next=3,i.Web3API.native.runContractFunction(Object(a.a)({function_name:"totalSupply"},n));case 3:return t=e.sent,C(t),e.next=7,i.Web3API.native.runContractFunction(Object(a.a)({function_name:"snailPrice"},n));case 7:r=e.sent,N(y.a.utils.parseUnits(r,"wei"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(b.a,{children:[Object(g.jsx)("meta",{charSet:"utf-8"}),Object(g.jsx)("title",{children:"Crypto Snails - Earn $snail crypto by playing the game"})]}),Object(g.jsxs)("div",{className:"flex justify-end",children:[Object(g.jsx)("div",{className:"flex px-5 py-5",children:Object(g.jsxs)("select",{value:t?"polygon":"mumbai",children:[Object(g.jsx)("option",{value:"polygon",children:"Polygon Mainnet"}),Object(g.jsx)("option",{value:"mumbai",children:"Polygon Testnet"})]})}),Object(g.jsx)("div",{className:"flex px-5 py-5 mr-5",children:x?Object(g.jsx)("button",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",onClick:function(){return f()},children:"Logout"}):Object(g.jsx)("button",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",onClick:Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.next=4,u({signingMessage:"CryptoSnails Auth"});case 4:case"end":return e.stop()}}),e)}))),children:"Connect Wallet"})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{className:"text-3xl text-center",children:"Earn $snail crypto by playing the game"}),Object(g.jsx)("div",{className:"flex justify-center",children:Object(g.jsx)("h4",{className:"max-w-xl mt-1 text-center",children:"Every day coins are thrown on the table. Collect them with a snail. In future snails can be staked to collect coins automatically."})})]}),Object(g.jsx)("div",{className:"pt-5 flex justify-center",children:Object(g.jsx)("div",{className:"flex w-300",children:Object(g.jsxs)("div",{className:"m-10",children:[Object(g.jsx)("h1",{className:"text-xl",children:"Mint CryptoSnails"}),Object(g.jsx)("br",{}),Object(g.jsxs)("span",{children:["Available: ",1e4-S," out of 10000"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("span",{children:["price: ",L&&y.a.utils.formatEther(L)," eth"]}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{className:"outline-black mr-5",type:"number",min:"1",max:"100",value:P,onChange:function(e){return E(e.target.value)}}),Object(g.jsx)("button",{onClick:function(){return B.apply(this,arguments)},className:"bg-blue-500 hover:bg-blue-700 text-white text-center py-2 px-4 rounded",children:"Mint"})]})})}),Object(g.jsx)("div",{children:c?Object(g.jsx)(w,{Moralis:i}):null}),Object(g.jsx)("div",{children:c?Object(g.jsx)(O,{Moralis:i}):null}),Object(g.jsx)("div",{className:"flex justify-center",children:Object(g.jsx)(T,{})})]})},N=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,1050)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},M={test:{appId:"qbDgtX7LMRwrKfrnFsVByi7pxup2gyuE3lX9O32I",serverUrl:"https://4xftb2hl4taq.grandmoralis.com:2053/server"},production:{appId:"JBfxbweoLK5be7xnZineX05Z3MRAPBoIohXvvqgX",serverUrl:"https://vqntw2bxdpp2.bigmoralis.com:2053/server"}};c.a.render(Object(g.jsx)(o.a,Object(a.a)(Object(a.a)({},M.test),{},{children:Object(g.jsx)(k,{isProduction:false})})),document.getElementById("root")),N(console.log)},711:function(e,t){},734:function(e,t){},736:function(e,t){},812:function(e,t){},814:function(e,t){},847:function(e,t){},852:function(e,t){},854:function(e,t){},861:function(e,t){},874:function(e,t){},892:function(e,t){},898:function(e,t){},900:function(e,t){},909:function(e,t){},911:function(e,t){}},[[1045,2,3]]]);
//# sourceMappingURL=main.7e1945d2.chunk.js.map